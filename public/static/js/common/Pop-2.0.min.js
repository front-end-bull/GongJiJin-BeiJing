define(function(require,exports,module){function createPopContent(e){popUp=document.createElement("div");var t=document.createElement("p"),o=document.createElement("div"),n=document.createElement("div");n.className="popBtnBox";var p=document.createElement("a");p.innerHTML="查看完整版",p.setAttribute("href",ruleMoreUrl);var a=document.createElement("p");a.innerHTML="我知道了",popUp.className="popup",t.className="popTit",t.innerHTML=e.title,o.className="popText",o.innerHTML=e.text,a.className="popClose",n.appendChild(p),n.appendChild(a),popUp.appendChild(t),popUp.appendChild(o),popUp.appendChild(n),popContent.appendChild(popUp),popUp.addEventListener("mousemove",function(e){stop(e)},!1),popUp.addEventListener("touchmove",function(e){e.stopPropagation()},!1);var r=popUp.offsetHeight,l=window.innerHeight;.9*l>r?(popUp.style.cssText="top:"+parseInt((l-r)/2)+"px",popContent.addEventListener("touchmove",stop,!1)):(o.style.cssText="height:"+parseInt(.75*l)+"px; overflow-y:scroll",popUp.style.cssText="height:"+parseInt(.9*l-40)+"px;top:"+parseInt(.05*l)+"px",popContent.removeEventListener("touchmove",stop,!1)),a.addEventListener("touchstart",function(e){hide(e)},!1)}function hide(e){var e=e||event;e.stopPropagation(),e.preventDefault(),popContent.innerHTML=" ",content.style.height="auto",content.children[0].style.top="auto",document.body.scrollTop=document.documentElement.scrollTop=scrollTop,obj.style.display="none"}function stop(e){var e=e||window.event;e.stopPropagation(),e.preventDefault()}function ajax(url,str){var oAjax=null;oAjax=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),oAjax.open("GET",url,!0),oAjax.send(),oAjax.onreadystatechange=function(){if(4==oAjax.readyState&&200==oAjax.status){var rep=oAjax.responseText.replace(/\s\s+/g,""),data=eval("("+rep+")");ruleMoreUrl=data.url;var dataContent=data[str];createPopContent(dataContent)}}}function stop(e){var e=e||window.event;e.cancelBubble=!0,e.stopPropagation()}var obj=null,popContent=null,popUp=null,content=null,contentHeight=0,ruleMoreUrl=null,scrollTop=0;exports.show=function(e,t,o){scrollTop=document.body.scrollTop||document.documentElement.scrollTop,content=_$("container"),contentHeight=content.offsetHeight,content.style.height=window.innerHeight-44+"px",content.children[0].style.top=-scrollTop+"px",obj=_$(e),popContent=obj.children[0],obj.style.cssText="display:block",t&&o&&ajax(t,o)}});